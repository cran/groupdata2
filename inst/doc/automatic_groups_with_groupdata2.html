<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Ludvig Renbo Olsen" />

<meta name="date" content="2020-06-06" />

<title>Automatic groups with groupdata2</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>

<style type="text/css">
  p.abstract{
    text-align: center;
    font-weight: bold;
  }
  div.abstract{
    margin: auto;
    width: 90%;
  }
</style>


<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>
<style type="text/css">h1 {
font-size:190%;
padding-top:20px;
}
hr {
border-style: solid;
border: none;
border-top: 0.5px solid #777;
margin: 28px 0;
}
img {
margin-top: 20px;
margin-bottom: 20px;
}
p {
padding-bottom:7px;
}
</style>




</head>

<body>




<h1 class="title toc-ignore">Automatic groups with groupdata2</h1>
<h4 class="author">Ludvig Renbo Olsen</h4>
<h4 class="date">2020-06-06</h4>
<div class="abstract">
<p class="abstract">Abstract</p>
<p>This vignette is an introduction to the package groupdata2.<br />
groupdata2 is a set of methods for easy grouping, windowing, folding, partitioning, splitting and balancing of data.<br />
We will go through finding and creating groups automatically with the ‘l_starts’ method.<br />
 <br />
For a more extensive description of groupdata2, please see <a href="description_of_groupdata2.html">Description of groupdata2</a>  <br />
 <br />
Contact author at <a href="mailto:r-pkgs@ludvigolsen.dk" class="email">r-pkgs@ludvigolsen.dk</a>  <br />
 </p>
<hr />
</div>


<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a><ul>
<li><a href="#attach-packages">Attach packages</a></li>
<li><a href="#data">Data</a></li>
</ul></li>
<li><a href="#outro">Outro</a></li>
</ul>
</div>

<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>In this vignette, we will use the ‘l_starts’ method with <strong>group</strong>() to allow transferring of information from one dataset to another. We will use the automatic grouping function that finds group starts all by itself.</p>
<div id="attach-packages" class="section level2">
<h2>Attach packages</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(groupdata2)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">library</span>(dplyr) <span class="co"># %&gt;%</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">library</span>(knitr) <span class="co"># kable</span></a></code></pre></div>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<p>3 participants were asked to solve a task. They had to take turns but could go for multiple runs of the task before taking a break and letting the next participant take over. They had 2 turns each. Let’s call each turn a session, i.e. there was 6 sessions. A team of experts would rate how well the participant did throughout the entire session, meaning that if the participant had some bad runs, they would have to make a choice whether to save energy for the other session or whether to try and correct the rating of the current session. For each run of the task, we recorded how many errors the participant made.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">df_observations &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  <span class="st">&quot;run&quot;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">30</span>,</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">  <span class="st">&quot;participant&quot;</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">             <span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">             <span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>,</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">             <span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">             <span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">             <span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>),</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">  <span class="st">&quot;errors&quot;</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">3</span>,</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">               <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">               <span class="dv">6</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">1</span>,</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">               <span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">               <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,</a>
<a class="sourceLine" id="cb2-15" data-line-number="15">               <span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb2-16" data-line-number="16">)</a>
<a class="sourceLine" id="cb2-17" data-line-number="17"></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co"># Show the first 20 rows of data frame</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19">df_observations <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">20</span>) <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">run</th>
<th align="right">participant</th>
<th align="right">errors</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="right">3</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="right">3</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">13</td>
<td align="right">3</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="right">3</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="right">16</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">17</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">df_ratings &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">  <span class="st">&quot;session&quot;</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>),</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">  <span class="st">&quot;rating&quot;</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">8</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">df_ratings <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">session</th>
<th align="right">rating</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">4</td>
</tr>
</tbody>
</table>
<p>We would like to get the ratings into the data frame with observations. For this we will first create a session column, and then get the ratings for the sessions. To do this we will use <strong>group</strong>() with the ‘l_starts’ method. This methods takes group start values, finds those values in a specified column, and creates groups that begin at the start values. To show this, let’s try it out with some start values before having <strong>group</strong>() find them automatically.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">group</span>(df_observations, <span class="dt">n =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">method =</span> <span class="st">'l_starts'</span>, </a>
<a class="sourceLine" id="cb4-3" data-line-number="3">      <span class="dt">starts_col =</span> <span class="st">'participant'</span>, <span class="dt">col_name =</span> <span class="st">'session'</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="st">  </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">run</th>
<th align="right">participant</th>
<th align="right">errors</th>
<th align="left">session</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="right">3</td>
<td align="right">6</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="right">3</td>
<td align="right">4</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="right">13</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="right">16</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">4</td>
</tr>
<tr class="odd">
<td align="right">17</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">4</td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">4</td>
</tr>
<tr class="odd">
<td align="right">21</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="right">22</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="left">5</td>
</tr>
<tr class="odd">
<td align="right">23</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="left">5</td>
</tr>
<tr class="even">
<td align="right">24</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">5</td>
</tr>
<tr class="odd">
<td align="right">25</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="left">6</td>
</tr>
<tr class="even">
<td align="right">26</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="left">6</td>
</tr>
<tr class="odd">
<td align="right">27</td>
<td align="right">3</td>
<td align="right">4</td>
<td align="left">6</td>
</tr>
<tr class="even">
<td align="right">28</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="left">6</td>
</tr>
<tr class="odd">
<td align="right">29</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="left">6</td>
</tr>
<tr class="even">
<td align="right">30</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="left">6</td>
</tr>
</tbody>
</table>
<p><strong>group</strong>() went through the participant column and found one value from <em>n</em> at a time. When it encountered the value, it noted down the row index and continued down the column searching for the next value in <em>n</em>. In the end it started groups at the found row indices from top to bottom. Since our data has the same value in the participant column for the entire session, we can actually get <strong>group</strong>() to find these group starts automatically. It will go through the given column, and whenever it encounters a new value, i.e. one that is different from the previous row, it starts a new group.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">df_observations &lt;-<span class="st"> </span><span class="kw">group</span>(df_observations, <span class="dt">n =</span> <span class="st">'auto'</span>, </a>
<a class="sourceLine" id="cb5-2" data-line-number="2">                         <span class="dt">method =</span> <span class="st">'l_starts'</span>,</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">                         <span class="dt">starts_col =</span> <span class="st">'participant'</span>, </a>
<a class="sourceLine" id="cb5-4" data-line-number="4">                         <span class="dt">col_name =</span> <span class="st">'session'</span>) </a>
<a class="sourceLine" id="cb5-5" data-line-number="5"></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">df_observations <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="st">  </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">run</th>
<th align="right">participant</th>
<th align="right">errors</th>
<th align="left">session</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="right">3</td>
<td align="right">6</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="right">3</td>
<td align="right">4</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="right">13</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="right">16</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">4</td>
</tr>
<tr class="odd">
<td align="right">17</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">4</td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">4</td>
</tr>
<tr class="odd">
<td align="right">21</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="right">22</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="left">5</td>
</tr>
<tr class="odd">
<td align="right">23</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="left">5</td>
</tr>
<tr class="even">
<td align="right">24</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">5</td>
</tr>
<tr class="odd">
<td align="right">25</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="left">6</td>
</tr>
<tr class="even">
<td align="right">26</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="left">6</td>
</tr>
<tr class="odd">
<td align="right">27</td>
<td align="right">3</td>
<td align="right">4</td>
<td align="left">6</td>
</tr>
<tr class="even">
<td align="right">28</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="left">6</td>
</tr>
<tr class="odd">
<td align="right">29</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="left">6</td>
</tr>
<tr class="even">
<td align="right">30</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="left">6</td>
</tr>
</tbody>
</table>
<p>And it works! :)<br />
If you just want the group starts, you can use the function <strong>find_starts</strong>().</p>
<p>Now that we have the session information, we can transfer the ratings from the ratings data frame.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">df_merged &lt;-<span class="st"> </span><span class="kw">merge</span>(df_observations, df_ratings, <span class="dt">by =</span> <span class="st">'session'</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co"># Show head of df_merged</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">df_merged <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">15</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">session</th>
<th align="right">run</th>
<th align="right">participant</th>
<th align="right">errors</th>
<th align="right">rating</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">6</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">8</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">9</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">10</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="right">11</td>
<td align="right">3</td>
<td align="right">6</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">3</td>
<td align="right">12</td>
<td align="right">3</td>
<td align="right">4</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="right">13</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">3</td>
<td align="right">14</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">4</td>
<td align="right">15</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">5</td>
</tr>
</tbody>
</table>
<p>Now, we can find the average number of errors per session and see if they correlate with the experts’ ratings.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">avg_errors &lt;-<span class="st"> </span>df_merged <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(session) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">summarize</span>(<span class="st">&quot;avg_errors&quot;</span> =<span class="st"> </span><span class="kw">mean</span>(errors))</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"></a>
<a class="sourceLine" id="cb7-6" data-line-number="6">avg_errors <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">session</th>
<th align="right">avg_errors</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">3.2500000</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">0.5000000</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="right">3.5000000</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="right">1.4285714</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="right">0.3333333</td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="right">2.5000000</td>
</tr>
</tbody>
</table>
<p>Let’s transfer the averages to the merged data frame. Once again, we just use merge(). Since we have just one rating per session, we will get only the first row of each session.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">df_summarized &lt;-<span class="st"> </span><span class="kw">merge</span>(df_merged, avg_errors, <span class="dt">by =</span> <span class="st">'session'</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(session) <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># For each session</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">row_number</span>()<span class="op">==</span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># Get first row</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>errors) <span class="co"># Remove errors column as we use avg_errors now</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"></a>
<a class="sourceLine" id="cb8-6" data-line-number="6">df_summarized <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">session</th>
<th align="right">run</th>
<th align="right">participant</th>
<th align="right">rating</th>
<th align="right">avg_errors</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">3.2500000</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">8</td>
<td align="right">0.5000000</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="right">11</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">3.5000000</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="right">15</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">1.4285714</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="right">22</td>
<td align="right">2</td>
<td align="right">9</td>
<td align="right">0.3333333</td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="right">25</td>
<td align="right">3</td>
<td align="right">4</td>
<td align="right">2.5000000</td>
</tr>
</tbody>
</table>
<p>We have 1 row per session with the participant, the rating and the average errors. If we wanted to know how many runs a session contained, we could extract it from the ‘run’ column.</p>
<p>Now let’s check if there’s a correlation between ratings and average errors.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">cor</span>(df_summarized<span class="op">$</span>rating, df_summarized<span class="op">$</span>avg_errors)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt; [1] -0.9739425</span></a></code></pre></div>
<p>It seems they are highly negatively correlated, so participants with fewer errors have higher ratings and vice versa.</p>
</div>
</div>
<div id="outro" class="section level1">
<h1>Outro</h1>
<p>Well done, you made it to the end of this introduction to groupdata2! If you want to know more about the various methods and arguments, you can read the <a href="description_of_groupdata2.html">Description of groupdata2</a>.<br />
If you have any questions or comments to this vignette (tutorial) or groupdata2, please send them to me at<br />
<a href="mailto:r-pkgs@ludvigolsen.dk" class="email">r-pkgs@ludvigolsen.dk</a>, or open an issue on the github page <a href="https://github.com/LudvigOlsen/groupdata2" class="uri">https://github.com/LudvigOlsen/groupdata2</a> so I can make improvements.</p>
<p>   </p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
